!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(o,s,function(e){return t[e]}.bind(null,s));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5)}([function(t,e){t.exports=require("react")},function(t,e,r){var o,s;o=[r,e,r(0),r(3)],void 0===(s=function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alert=function(t){var e=t.className,s=t.bootstrapStyle,n=t.message;return n?r.createElement("div",{className:o("alert alert-"+s,e)},n):null},e.Alert.displayName="Alert"}.apply(e,o))||(t.exports=s)},function(t,e,r){var o,s,n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();o=[r,e,r(0),r(3),r(1),r(4)],void 0===(s=function(t,e,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(){var t=this.props,e=t.barType,n=t.bootstrapStyle,i=t.colorSwitch,a=t.displayText,l=t.displayTextValue,p=t.maximumValue,u=t.onClickAction,c=t.progress,d=this.progressValue(p,c);return r.createElement("div",{className:o("widget-progress-bar",this.props.className),style:this.props.style},r.createElement("div",{className:o("progress",{"widget-progress-bar-alert":!p||p<1,"widget-progress-bar-clickable":!!u,"widget-progress-bar-text-contrast":Math.abs(d)<i}),onClick:this.props.onClickAction},r.createElement("div",{className:o("progress-bar","progress-bar-"+(n||"default"),{active:"animated"===e,"progress-bar-striped":"striped"===e||"animated"===e,"widget-progress-bar-negative":d<0}),style:{width:Math.abs(d)+"%"}},this.getProgressText(p,c,a,l))),r.createElement(s.Alert,{bootstrapStyle:"danger",className:"widget-progressbar",message:this.props.alertMessage}))},e.prototype.progressValue=function(t,e){return"number"!=typeof e||t<1?0:e>t||Math.abs(this.calculatePercentage(e,t))>100?100:this.calculatePercentage(e,t)},e.prototype.calculatePercentage=function(t,e){return Math.round(t/e*100)},e.prototype.getProgressText=function(t,e,r,o){return null===e||void 0===e||"none"===r?"":t<=0?"Invalid":"value"===r?""+this.calculatePercentage(e,t):"percentage"===r?this.calculatePercentage(e,t)+"%":("static"===r||"attribute"===r)&&o||""},e.defaultProps={barType:"default",bootstrapStyle:"default",colorSwitch:50,displayText:"percentage",maximumValue:100},e}(r.Component);e.ProgressBar=i}.apply(e,o))||(t.exports=s)},function(t,e,r){var o;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var n=typeof o;if("string"===n||"number"===n)t.push(o);else if(Array.isArray(o)&&o.length){var i=s.apply(null,o);i&&t.push(i)}else if("object"===n)for(var a in o)r.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}void 0!==t&&t.exports?(s.default=s,t.exports=s):void 0===(o=function(){return s}.apply(e,[]))||(t.exports=o)}()},function(t,e){t.exports="/* https://raw.githubusercontent.com/mendix/atlas-framework/master/_variables.scss */\n.widget-progress-bar {\n  width: 100%; }\n\n.widget-progress-bar-clickable:hover {\n  cursor: pointer; }\n\n.widget-progress-bar-negative {\n  float: right;\n  display: block; }\n\n.widget-progress-bar .progress-bar-default {\n  background-color: #DDDDDD; }\n\n.widget-progress-bar .progress-bar-primary {\n  background-color: #0595DB; }\n\n.widget-progress-bar .progress-bar-success {\n  background-color: #76CA02; }\n\n.widget-progress-bar .progress-bar-info {\n  background-color: #48B0F7; }\n\n.widget-progress-bar .progress-bar-warning {\n  background-color: #f99b1d; }\n\n.widget-progress-bar .progress-bar-danger {\n  background-color: #ed1c24; }\n\n.widget-progress-bar .progress-bar-inverse {\n  background-color: #252C36; }\n\n.widget-progress-bar-alert.widget-progress-bar-text-contrast .progress-bar {\n  color: #8e1116; }\n\n.widget-progress-bar-text-contrast .progress-bar {\n  color: #555; }\n"},function(t,e,r){var o,s,n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();o=[r,e,r(0),r(2),r(6),r(1)],void 0===(s=function(t,e,o,s,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(){var t=i.default.validateProps(this.props),e=o.createElement(s.ProgressBar,this.transformProps(this.props));return t?o.createElement("div",{},o.createElement(a.Alert,{bootstrapStyle:"danger",message:t}),e):e},e.prototype.transformProps=function(t){return{barType:t.barType,bootstrapStyle:t.bootstrapStyle,className:t.class,colorSwitch:t.textColorSwitch,displayText:t.displayText,displayTextValue:this.getDisplayTextValue(),maximumValue:t.staticMaximumValue,progress:t.staticValue,style:i.default.parseStyle(t.style)}},e.prototype.getDisplayTextValue=function(){return"attribute"===this.props.displayText?"{ "+this.props.displayTextAttribute+" }":"static"===this.props.displayText?this.props.displayTextStatic:""},e}(o.Component);e.preview=l,e.getPreviewCss=function(){return r(4)},e.getVisibleProperties=function(t,e){return e.onClickMicroflow="callMicroflow"===t.onClickOption,e.onClickNanoflow="callNanoflow"===t.onClickOption,e.onClickPage="showPage"===t.onClickOption,e.openPageAs="showPage"===t.onClickOption,e.displayTextAttribute="attribute"===t.displayText,e.displayTextStatic="static"===t.displayText,e}}.apply(e,o))||(t.exports=s)},function(t,e,r){var o,s,n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();o=[r,e,r(0),r(2),r(1)],void 0===(s=function(t,e,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(r){var o=t.call(this,r)||this;o.defaultMaximumValue=100;var s=o.updateValues(r.mxObject);return s.alertMessage=e.validateProps(r),s.showAlert=!!s.alertMessage,s.displayTextAttributeValue="",o.state=s,o.subscriptionHandles=[],o.handleClick=o.handleClick.bind(o),o.subscriptionCallback=function(t){return function(){return o.setState(o.updateValues(t))}},o}return n(e,t),e.parseStyle=function(t){void 0===t&&(t="");try{return t.split(";").reduce(function(t,e){var r=e.split(":");2===r.length&&(t[r[0].trim().replace(/(-.)/g,function(t){return t[1].toUpperCase()})]=r[1].trim());return t},{})}catch(e){console.log("Failed to parse style",t,e)}return{}},e.prototype.render=function(){return this.state.showAlert?r.createElement(s.Alert,{bootstrapStyle:"danger",className:"widget-progressbar",message:this.state.alertMessage}):r.createElement(o.ProgressBar,{alertMessage:this.state.alertMessage,barType:this.props.barType,bootstrapStyle:this.state.themeStyle,className:this.props.class,colorSwitch:this.props.textColorSwitch,displayText:this.props.displayText,displayTextValue:this.getDisplayTextValue(),maximumValue:this.props.maximumValueAttribute?this.state.maximumValue:this.props.staticMaximumValue,onClickAction:"doNothing"!==this.props.onClickOption&&this.props.mxObject?this.handleClick:void 0,progress:this.props.progressAttribute?this.state.progressValue||0:this.props.staticValue,style:e.parseStyle(this.props.style)})},e.prototype.componentWillReceiveProps=function(t){this.resetSubscription(t.mxObject),this.setState(this.updateValues(t.mxObject))},e.prototype.componentWillUnmount=function(){this.subscriptionHandles.forEach(window.mx.data.unsubscribe)},e.validateProps=function(t){var e="";return"callMicroflow"!==t.onClickOption||t.onClickMicroflow?"callNanoflow"!==t.onClickOption||t.onClickNanoflow.nanoflow?"showPage"!==t.onClickOption||t.onClickPage||(e="on click page is required in the 'Events' tab, 'Page' property"):e="on click nanoflow is required in the 'Events' tab, 'Nanoflow' property":e="on click microflow is required in the 'Events' tab, 'Microflow' property",e&&"Error in progress bar configuration: "+e},e.prototype.getValue=function(t,e,r){if(r&&t){var o=parseFloat(r.get(t));if(o||0===o)return o}return e},e.prototype.getBarStyle=function(t){return t&&this.props.bootstrapStyleAttribute?t.get(this.props.bootstrapStyleAttribute):this.props.bootstrapStyle},e.prototype.updateValues=function(t){return{displayTextAttributeValue:t?t.get(this.props.displayTextAttribute):"",maximumValue:this.getValue(this.props.maximumValueAttribute,this.defaultMaximumValue,t),progressValue:this.getValue(this.props.progressAttribute,void 0,t),themeStyle:this.getBarStyle(t)}},e.prototype.getDisplayTextValue=function(){return"attribute"===this.props.displayText?this.state.displayTextAttributeValue:"static"===this.props.displayText?this.props.displayTextStatic:""},e.prototype.resetSubscription=function(t){var e=this;this.subscriptionHandles.forEach(window.mx.data.unsubscribe),this.subscriptionHandles=[],t&&(this.subscriptionHandles.push(window.mx.data.subscribe({callback:this.subscriptionCallback(t),guid:t.getGuid()})),[this.props.progressAttribute,this.props.displayTextAttribute,this.props.maximumValueAttribute,this.props.bootstrapStyleAttribute].forEach(function(r){e.subscriptionHandles.push(window.mx.data.subscribe({attr:r,callback:e.subscriptionCallback(t),guid:t.getGuid()}))}))},e.prototype.handleClick=function(){var t=this.props,e=t.mxform,r=t.mxObject,o=t.onClickMicroflow,s=t.onClickNanoflow,n=t.onClickOption,i=t.onClickPage,a=t.openPageAs;if(r&&r.getGuid()){var l=new window.mendix.lib.MxContext;l.setContext(r.getEntity(),r.getGuid()),"callMicroflow"===n&&o?window.mx.ui.action(o,{context:l,error:function(t){return window.mx.ui.error("Error while executing microflow "+o+": "+t.message)},origin:e}):"callNanoflow"===n&&s.nanoflow?window.mx.data.callNanoflow({context:l,error:function(t){return mx.ui.error("An error occurred while executing the on click nanoflow: "+t.message)},nanoflow:s,origin:e}):"showPage"===n&&i&&window.mx.ui.openForm(i,{context:l,error:function(t){return window.mx.ui.error("Error while opening page "+i+": "+t.message)},location:a})}},e}(r.Component);e.default=i}.apply(e,o))||(t.exports=s)}]));

//# sourceURL=ProgressBar.webmodeler.js
